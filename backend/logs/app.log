2026-02-11 13:53:04,974 | INFO | app.main | Application startup complete
2026-02-11 13:53:04,977 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2026-02-11 13:53:04,978 | INFO | sqlalchemy.engine.Engine | PRAGMA main.table_info("otps")
2026-02-11 13:53:04,978 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2026-02-11 13:53:04,980 | INFO | sqlalchemy.engine.Engine | PRAGMA temp.table_info("otps")
2026-02-11 13:53:04,981 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2026-02-11 13:53:04,981 | INFO | sqlalchemy.engine.Engine | PRAGMA main.table_info("users")
2026-02-11 13:53:04,982 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2026-02-11 13:53:04,982 | INFO | sqlalchemy.engine.Engine | PRAGMA temp.table_info("users")
2026-02-11 13:53:04,983 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2026-02-11 13:53:04,984 | INFO | sqlalchemy.engine.Engine | 
CREATE TABLE otps (
	id INTEGER NOT NULL, 
	email VARCHAR(255) NOT NULL, 
	code VARCHAR(10) NOT NULL, 
	attempts INTEGER NOT NULL, 
	created_at DATETIME NOT NULL, 
	expires_at DATETIME NOT NULL, 
	verified_at DATETIME, 
	PRIMARY KEY (id)
)


2026-02-11 13:53:04,985 | INFO | sqlalchemy.engine.Engine | [no key 0.00082s] ()
2026-02-11 13:53:04,996 | INFO | sqlalchemy.engine.Engine | CREATE INDEX ix_otps_expires_at ON otps (expires_at)
2026-02-11 13:53:04,997 | INFO | sqlalchemy.engine.Engine | [no key 0.00042s] ()
2026-02-11 13:53:05,004 | INFO | sqlalchemy.engine.Engine | CREATE INDEX ix_otps_email ON otps (email)
2026-02-11 13:53:05,005 | INFO | sqlalchemy.engine.Engine | [no key 0.00037s] ()
2026-02-11 13:53:05,016 | INFO | sqlalchemy.engine.Engine | 
CREATE TABLE users (
	id INTEGER NOT NULL, 
	username VARCHAR(50) NOT NULL, 
	entra_oid VARCHAR(255) NOT NULL, 
	entra_email VARCHAR(255) NOT NULL, 
	role VARCHAR(20) NOT NULL, 
	status VARCHAR(20) NOT NULL, 
	created_at DATETIME NOT NULL, 
	last_login DATETIME, 
	PRIMARY KEY (id)
)


2026-02-11 13:53:05,016 | INFO | sqlalchemy.engine.Engine | [no key 0.00065s] ()
2026-02-11 13:53:05,024 | INFO | sqlalchemy.engine.Engine | CREATE UNIQUE INDEX ix_users_username ON users (username)
2026-02-11 13:53:05,024 | INFO | sqlalchemy.engine.Engine | [no key 0.00049s] ()
2026-02-11 13:53:05,033 | INFO | sqlalchemy.engine.Engine | CREATE INDEX ix_users_entra_email ON users (entra_email)
2026-02-11 13:53:05,033 | INFO | sqlalchemy.engine.Engine | [no key 0.00038s] ()
2026-02-11 13:53:05,041 | INFO | sqlalchemy.engine.Engine | CREATE UNIQUE INDEX ix_users_entra_oid ON users (entra_oid)
2026-02-11 13:53:05,041 | INFO | sqlalchemy.engine.Engine | [no key 0.00035s] ()
2026-02-11 13:53:05,049 | INFO | sqlalchemy.engine.Engine | COMMIT
2026-02-11 13:53:05,050 | INFO | app.main | Database initialized successfully
2026-02-11 13:53:05,053 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2026-02-11 13:53:05,055 | INFO | sqlalchemy.engine.Engine | DELETE FROM otps WHERE otps.expires_at <= ?
2026-02-11 13:53:05,056 | INFO | sqlalchemy.engine.Engine | [generated in 0.00047s] ('2026-02-11 11:53:05.052641',)
2026-02-11 13:53:05,056 | INFO | sqlalchemy.engine.Engine | COMMIT
2026-02-11 13:55:25,228 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2026-02-11 13:55:25,228 | INFO | sqlalchemy.engine.Engine | DELETE FROM otps WHERE otps.expires_at <= ?
2026-02-11 13:55:25,228 | INFO | sqlalchemy.engine.Engine | [cached since 140.2s ago] ('2026-02-11 11:55:25.227341',)
2026-02-11 13:55:25,229 | INFO | sqlalchemy.engine.Engine | COMMIT
2026-02-11 13:55:25,230 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2026-02-11 13:55:25,231 | INFO | sqlalchemy.engine.Engine | INSERT INTO otps (email, code, attempts, created_at, expires_at, verified_at) VALUES (?, ?, ?, ?, ?, ?)
2026-02-11 13:55:25,232 | INFO | sqlalchemy.engine.Engine | [generated in 0.00047s] ('rhm31@mail.aub.edu', '828439', 0, '2026-02-11 11:55:25.231756', '2026-02-11 12:05:25.229893', None)
2026-02-11 13:55:25,233 | INFO | sqlalchemy.engine.Engine | COMMIT
2026-02-11 13:55:25,240 | INFO | app.api.auth | OTP code for rhm31@mail.aub.edu: 828439 (expires in 10 min)
2026-02-11 13:55:25,240 | WARNING | app.api.auth | SMTP not configured; OTP code logged above for rhm31@mail.aub.edu
2026-02-11 13:55:25,240 | INFO | app.api.auth | OTP created for rhm31@mail.aub.edu, expires at 2026-02-11T12:05:25.229893
2026-02-11 13:57:44,741 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2026-02-11 13:57:44,743 | INFO | sqlalchemy.engine.Engine | DELETE FROM otps WHERE otps.expires_at <= ?
2026-02-11 13:57:44,744 | INFO | sqlalchemy.engine.Engine | [cached since 279.7s ago] ('2026-02-11 11:57:44.739434',)
2026-02-11 13:57:44,746 | INFO | sqlalchemy.engine.Engine | COMMIT
2026-02-11 13:57:44,749 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2026-02-11 13:57:44,751 | INFO | sqlalchemy.engine.Engine | INSERT INTO otps (email, code, attempts, created_at, expires_at, verified_at) VALUES (?, ?, ?, ?, ?, ?)
2026-02-11 13:57:44,752 | INFO | sqlalchemy.engine.Engine | [cached since 139.5s ago] ('rhm31@mail.aub.edu', '657440', 0, '2026-02-11 11:57:44.751287', '2026-02-11 12:07:44.748165', None)
2026-02-11 13:57:44,758 | INFO | sqlalchemy.engine.Engine | COMMIT
2026-02-11 13:57:44,771 | INFO | app.api.auth | OTP code for rhm31@mail.aub.edu: 657440 (expires in 10 min)
2026-02-11 13:57:44,772 | WARNING | app.api.auth | SMTP not configured; OTP code logged above for rhm31@mail.aub.edu
2026-02-11 13:57:44,773 | INFO | app.api.auth | OTP created for rhm31@mail.aub.edu, expires at 2026-02-11T12:07:44.748165
2026-02-11 13:58:41,664 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2026-02-11 13:58:41,666 | INFO | sqlalchemy.engine.Engine | DELETE FROM otps WHERE otps.expires_at <= ?
2026-02-11 13:58:41,667 | INFO | sqlalchemy.engine.Engine | [cached since 336.6s ago] ('2026-02-11 11:58:41.663692',)
2026-02-11 13:58:41,669 | INFO | sqlalchemy.engine.Engine | COMMIT
2026-02-11 13:58:41,672 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2026-02-11 13:58:41,673 | INFO | sqlalchemy.engine.Engine | INSERT INTO otps (email, code, attempts, created_at, expires_at, verified_at) VALUES (?, ?, ?, ?, ?, ?)
2026-02-11 13:58:41,675 | INFO | sqlalchemy.engine.Engine | [cached since 196.4s ago] ('rhm31@mail.aub.edu', '571652', 0, '2026-02-11 11:58:41.673740', '2026-02-11 12:08:41.671400', None)
2026-02-11 13:58:41,680 | INFO | sqlalchemy.engine.Engine | COMMIT
2026-02-11 13:58:41,692 | INFO | app.api.auth | OTP code for rhm31@mail.aub.edu: 571652 (expires in 10 min)
2026-02-11 13:58:41,693 | WARNING | app.api.auth | SMTP not configured; OTP code logged above for rhm31@mail.aub.edu
2026-02-11 13:58:41,694 | INFO | app.api.auth | OTP created for rhm31@mail.aub.edu, expires at 2026-02-11T12:08:41.671400
2026-02-11 15:01:26,353 | INFO | app.main | Application startup complete
2026-02-11 15:01:26,357 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2026-02-11 15:01:26,357 | INFO | sqlalchemy.engine.Engine | PRAGMA main.table_info("otps")
2026-02-11 15:01:26,358 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2026-02-11 15:01:26,359 | INFO | sqlalchemy.engine.Engine | PRAGMA main.table_info("users")
2026-02-11 15:01:26,360 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2026-02-11 15:01:26,361 | INFO | sqlalchemy.engine.Engine | COMMIT
2026-02-11 15:01:26,361 | INFO | app.main | Database initialized successfully
2026-02-11 15:01:26,363 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2026-02-11 15:01:26,364 | INFO | sqlalchemy.engine.Engine | DELETE FROM otps WHERE otps.expires_at <= ?
2026-02-11 15:01:26,365 | INFO | sqlalchemy.engine.Engine | [generated in 0.00034s] ('2026-02-11 13:01:26.362719',)
2026-02-11 15:01:26,366 | INFO | sqlalchemy.engine.Engine | COMMIT
2026-02-11 15:01:26,377 | INFO | app.core.tasks | Cleaned up 3 expired OTP records
2026-02-11 15:01:35,267 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2026-02-11 15:01:35,268 | INFO | sqlalchemy.engine.Engine | DELETE FROM otps WHERE otps.expires_at <= ?
2026-02-11 15:01:35,269 | INFO | sqlalchemy.engine.Engine | [cached since 8.904s ago] ('2026-02-11 13:01:35.267287',)
2026-02-11 15:01:35,269 | INFO | sqlalchemy.engine.Engine | COMMIT
2026-02-11 15:01:35,271 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2026-02-11 15:01:35,273 | INFO | sqlalchemy.engine.Engine | INSERT INTO otps (email, code, attempts, created_at, expires_at, verified_at) VALUES (?, ?, ?, ?, ?, ?)
2026-02-11 15:01:35,274 | INFO | sqlalchemy.engine.Engine | [generated in 0.00067s] ('rhm31@mail.aub.edu', '998026', 0, '2026-02-11 13:01:35.273551', '2026-02-11 13:11:35.270519', None)
2026-02-11 15:01:35,276 | INFO | sqlalchemy.engine.Engine | COMMIT
2026-02-11 15:01:35,284 | INFO | app.api.auth | OTP code for rhm31@mail.aub.edu: 998026 (expires in 10 min)
2026-02-11 15:01:35,284 | WARNING | app.api.auth | SMTP not configured; OTP code logged above for rhm31@mail.aub.edu
2026-02-11 15:01:35,284 | INFO | app.api.auth | OTP created for rhm31@mail.aub.edu, expires at 2026-02-11T13:11:35.270519
2026-02-11 15:02:03,799 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2026-02-11 15:02:03,800 | INFO | sqlalchemy.engine.Engine | DELETE FROM otps WHERE otps.expires_at <= ?
2026-02-11 15:02:03,801 | INFO | sqlalchemy.engine.Engine | [cached since 37.44s ago] ('2026-02-11 13:02:03.799082',)
2026-02-11 15:02:03,802 | INFO | sqlalchemy.engine.Engine | COMMIT
2026-02-11 15:02:03,803 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2026-02-11 15:02:03,804 | INFO | sqlalchemy.engine.Engine | INSERT INTO otps (email, code, attempts, created_at, expires_at, verified_at) VALUES (?, ?, ?, ?, ?, ?)
2026-02-11 15:02:03,804 | INFO | sqlalchemy.engine.Engine | [cached since 28.53s ago] ('rhm31@mail.aub.edu', '245985', 0, '2026-02-11 13:02:03.804215', '2026-02-11 13:12:03.802833', None)
2026-02-11 15:02:03,808 | INFO | sqlalchemy.engine.Engine | COMMIT
2026-02-11 15:02:03,818 | INFO | app.api.auth | OTP code for rhm31@mail.aub.edu: 245985 (expires in 10 min)
2026-02-11 15:02:03,818 | WARNING | app.api.auth | SMTP not configured; OTP code logged above for rhm31@mail.aub.edu
2026-02-11 15:02:03,818 | INFO | app.api.auth | OTP created for rhm31@mail.aub.edu, expires at 2026-02-11T13:12:03.802833
2026-02-11 15:02:26,371 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2026-02-11 15:02:26,373 | INFO | sqlalchemy.engine.Engine | DELETE FROM otps WHERE otps.expires_at <= ?
2026-02-11 15:02:26,373 | INFO | sqlalchemy.engine.Engine | [cached since 60.01s ago] ('2026-02-11 13:02:26.370370',)
2026-02-11 15:02:26,375 | INFO | sqlalchemy.engine.Engine | COMMIT
2026-02-11 15:02:26,377 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2026-02-11 15:02:26,379 | INFO | sqlalchemy.engine.Engine | INSERT INTO otps (email, code, attempts, created_at, expires_at, verified_at) VALUES (?, ?, ?, ?, ?, ?)
2026-02-11 15:02:26,380 | INFO | sqlalchemy.engine.Engine | [cached since 51.11s ago] ('rhm31@mail.aub.edu', '955131', 0, '2026-02-11 13:02:26.379086', '2026-02-11 13:12:26.377052', None)
2026-02-11 15:02:26,386 | INFO | sqlalchemy.engine.Engine | COMMIT
2026-02-11 15:02:26,400 | INFO | app.api.auth | OTP code for rhm31@mail.aub.edu: 955131 (expires in 10 min)
2026-02-11 15:02:26,401 | WARNING | app.api.auth | SMTP not configured; OTP code logged above for rhm31@mail.aub.edu
2026-02-11 15:02:26,401 | INFO | app.api.auth | OTP created for rhm31@mail.aub.edu, expires at 2026-02-11T13:12:26.377052
2026-02-11 15:02:46,637 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2026-02-11 15:02:46,639 | INFO | sqlalchemy.engine.Engine | DELETE FROM otps WHERE otps.expires_at <= ?
2026-02-11 15:02:46,640 | INFO | sqlalchemy.engine.Engine | [cached since 80.28s ago] ('2026-02-11 13:02:46.635966',)
2026-02-11 15:02:46,642 | INFO | sqlalchemy.engine.Engine | COMMIT
2026-02-11 15:02:46,644 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2026-02-11 15:02:46,645 | INFO | sqlalchemy.engine.Engine | INSERT INTO otps (email, code, attempts, created_at, expires_at, verified_at) VALUES (?, ?, ?, ?, ?, ?)
2026-02-11 15:02:46,646 | INFO | sqlalchemy.engine.Engine | [cached since 71.37s ago] ('rhm31@mail.aub.edu', '176280', 0, '2026-02-11 13:02:46.645524', '2026-02-11 13:12:46.643524', None)
2026-02-11 15:02:46,652 | INFO | sqlalchemy.engine.Engine | COMMIT
2026-02-11 15:02:46,663 | INFO | app.api.auth | OTP code for rhm31@mail.aub.edu: 176280 (expires in 10 min)
2026-02-11 15:02:46,664 | WARNING | app.api.auth | SMTP not configured; OTP code logged above for rhm31@mail.aub.edu
2026-02-11 15:02:46,664 | INFO | app.api.auth | OTP created for rhm31@mail.aub.edu, expires at 2026-02-11T13:12:46.643524
2026-02-11 15:05:16,874 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2026-02-11 15:05:16,874 | INFO | sqlalchemy.engine.Engine | DELETE FROM otps WHERE otps.expires_at <= ?
2026-02-11 15:05:16,874 | INFO | sqlalchemy.engine.Engine | [cached since 230.5s ago] ('2026-02-11 13:05:16.873454',)
2026-02-11 15:05:16,875 | INFO | sqlalchemy.engine.Engine | COMMIT
2026-02-11 15:05:16,876 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2026-02-11 15:05:16,876 | INFO | sqlalchemy.engine.Engine | INSERT INTO otps (email, code, attempts, created_at, expires_at, verified_at) VALUES (?, ?, ?, ?, ?, ?)
2026-02-11 15:05:16,876 | INFO | sqlalchemy.engine.Engine | [cached since 221.6s ago] ('rhm31@mail.aub.edu', '272438', 0, '2026-02-11 13:05:16.876446', '2026-02-11 13:15:16.875717', None)
2026-02-11 15:05:16,879 | INFO | sqlalchemy.engine.Engine | COMMIT
2026-02-11 15:05:16,886 | INFO | app.api.auth | OTP code for rhm31@mail.aub.edu: 272438 (expires in 10 min)
2026-02-11 15:05:16,886 | WARNING | app.api.auth | SMTP not configured; OTP code logged above for rhm31@mail.aub.edu
2026-02-11 15:05:16,886 | INFO | app.api.auth | OTP created for rhm31@mail.aub.edu, expires at 2026-02-11T13:15:16.875717
2026-02-11 15:18:43,065 | INFO | app.main | Application startup complete
2026-02-11 15:18:43,068 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2026-02-11 15:18:43,068 | INFO | sqlalchemy.engine.Engine | PRAGMA main.table_info("otps")
2026-02-11 15:18:43,068 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2026-02-11 15:18:43,069 | INFO | sqlalchemy.engine.Engine | PRAGMA main.table_info("users")
2026-02-11 15:18:43,070 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2026-02-11 15:18:43,070 | INFO | sqlalchemy.engine.Engine | COMMIT
2026-02-11 15:18:43,070 | INFO | app.main | Database initialized successfully
2026-02-11 15:18:43,072 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2026-02-11 15:18:43,073 | INFO | sqlalchemy.engine.Engine | DELETE FROM otps WHERE otps.expires_at <= ?
2026-02-11 15:18:43,074 | INFO | sqlalchemy.engine.Engine | [generated in 0.00021s] ('2026-02-11 13:18:43.071992',)
2026-02-11 15:18:43,075 | INFO | sqlalchemy.engine.Engine | COMMIT
2026-02-11 15:18:43,082 | INFO | app.core.tasks | Cleaned up 5 expired OTP records
2026-02-11 15:19:21,681 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2026-02-11 15:19:21,682 | INFO | sqlalchemy.engine.Engine | DELETE FROM otps WHERE otps.expires_at <= ?
2026-02-11 15:19:21,682 | INFO | sqlalchemy.engine.Engine | [cached since 38.61s ago] ('2026-02-11 13:19:21.681082',)
2026-02-11 15:19:21,683 | INFO | sqlalchemy.engine.Engine | COMMIT
2026-02-11 15:19:21,684 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2026-02-11 15:19:21,685 | INFO | sqlalchemy.engine.Engine | INSERT INTO otps (email, code, attempts, created_at, expires_at, verified_at) VALUES (?, ?, ?, ?, ?, ?)
2026-02-11 15:19:21,686 | INFO | sqlalchemy.engine.Engine | [generated in 0.00046s] ('rhm31@mail.aub.edu', '671126', 0, '2026-02-11 13:19:21.685724', '2026-02-11 13:29:21.683759', None)
2026-02-11 15:19:21,688 | INFO | sqlalchemy.engine.Engine | COMMIT
2026-02-11 15:19:21,698 | INFO | app.api.auth | OTP code for rhm31@mail.aub.edu: 671126 (expires in 10 min)
2026-02-11 15:19:24,935 | INFO | app.api.auth | OTP email sent successfully to rhm31@mail.aub.edu
2026-02-11 15:19:24,936 | INFO | app.api.auth | OTP created for rhm31@mail.aub.edu, expires at 2026-02-11T13:29:21.683759
2026-02-11 15:20:12,625 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2026-02-11 15:20:12,635 | INFO | sqlalchemy.engine.Engine | SELECT otps.id AS otps_id, otps.email AS otps_email, otps.code AS otps_code, otps.attempts AS otps_attempts, otps.created_at AS otps_created_at, otps.expires_at AS otps_expires_at, otps.verified_at AS otps_verified_at 
FROM otps 
WHERE otps.email = ? AND otps.expires_at > ? ORDER BY otps.created_at DESC
 LIMIT ? OFFSET ?
2026-02-11 15:20:12,636 | INFO | sqlalchemy.engine.Engine | [generated in 0.00201s] ('rhm31@mail.aub.edu', '2026-02-11 13:20:12.623968', 1, 0)
2026-02-11 15:20:12,647 | INFO | sqlalchemy.engine.Engine | SELECT users.id AS users_id, users.username AS users_username, users.entra_oid AS users_entra_oid, users.entra_email AS users_entra_email, users.role AS users_role, users.status AS users_status, users.created_at AS users_created_at, users.last_login AS users_last_login 
FROM users 
WHERE users.entra_oid = ?
 LIMIT ? OFFSET ?
2026-02-11 15:20:12,648 | INFO | sqlalchemy.engine.Engine | [generated in 0.00137s] ('local:rhm31@mail.aub.edu', 1, 0)
2026-02-11 15:20:12,655 | INFO | sqlalchemy.engine.Engine | SELECT users.id AS users_id, users.username AS users_username, users.entra_oid AS users_entra_oid, users.entra_email AS users_entra_email, users.role AS users_role, users.status AS users_status, users.created_at AS users_created_at, users.last_login AS users_last_login 
FROM users 
WHERE users.username = ?
 LIMIT ? OFFSET ?
2026-02-11 15:20:12,656 | INFO | sqlalchemy.engine.Engine | [generated in 0.00129s] ('KeenEagle6099', 1, 0)
2026-02-11 15:20:12,662 | INFO | sqlalchemy.engine.Engine | INSERT INTO users (username, entra_oid, entra_email, role, status, created_at, last_login) VALUES (?, ?, ?, ?, ?, ?, ?)
2026-02-11 15:20:12,663 | INFO | sqlalchemy.engine.Engine | [generated in 0.00154s] ('KeenEagle6099', 'local:rhm31@mail.aub.edu', 'rhm31@mail.aub.edu', 'student', 'active', '2026-02-11 13:20:12.661770', '2026-02-11 13:20:12.658689')
2026-02-11 15:20:12,669 | INFO | sqlalchemy.engine.Engine | COMMIT
2026-02-11 15:20:12,681 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2026-02-11 15:20:12,685 | INFO | sqlalchemy.engine.Engine | UPDATE otps SET verified_at=? WHERE otps.id = ?
2026-02-11 15:20:12,686 | INFO | sqlalchemy.engine.Engine | [generated in 0.00099s] ('2026-02-11 13:20:12.681155', 1)
2026-02-11 15:20:12,689 | INFO | sqlalchemy.engine.Engine | COMMIT
2026-02-11 15:20:12,699 | INFO | app.api.auth | OTP verified and user logged in: KeenEagle6099 (rhm31@mail.aub.edu)
2026-02-11 15:20:12,714 | DEBUG | app.api.auth | Me called, user resolved
2026-02-11 15:20:12,717 | DEBUG | app.api.auth | Me called, user resolved
2026-02-11 15:20:23,714 | DEBUG | app.api.auth | Me called, user resolved
2026-02-11 15:20:23,716 | DEBUG | app.api.auth | Me called, user resolved
2026-02-11 15:20:23,720 | DEBUG | app.api.auth | Me called, user resolved
2026-02-11 15:20:23,722 | DEBUG | app.api.auth | Me called, user resolved
2026-02-11 15:20:31,802 | DEBUG | app.api.auth | Me called, user resolved
2026-02-11 15:20:31,811 | DEBUG | app.api.auth | Me called, user resolved
2026-02-11 15:20:31,831 | DEBUG | app.api.auth | Me called, user resolved
2026-02-11 15:20:31,836 | DEBUG | app.api.auth | Me called, user resolved
2026-02-11 15:20:35,223 | INFO | app.api.auth | Logout: session cookie cleared
2026-02-11 15:20:53,383 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2026-02-11 15:20:53,383 | INFO | sqlalchemy.engine.Engine | DELETE FROM otps WHERE otps.expires_at <= ?
2026-02-11 15:20:53,384 | INFO | sqlalchemy.engine.Engine | [cached since 130.3s ago] ('2026-02-11 13:20:53.382823',)
2026-02-11 15:20:53,384 | INFO | sqlalchemy.engine.Engine | COMMIT
2026-02-11 15:20:53,385 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2026-02-11 15:20:53,386 | INFO | sqlalchemy.engine.Engine | INSERT INTO otps (email, code, attempts, created_at, expires_at, verified_at) VALUES (?, ?, ?, ?, ?, ?)
2026-02-11 15:20:53,386 | INFO | sqlalchemy.engine.Engine | [cached since 91.7s ago] ('rhm31@mail.aub.edu', '245302', 0, '2026-02-11 13:20:53.386111', '2026-02-11 13:30:53.385198', None)
2026-02-11 15:20:53,389 | INFO | sqlalchemy.engine.Engine | COMMIT
2026-02-11 15:20:53,398 | INFO | app.api.auth | OTP code for rhm31@mail.aub.edu: 245302 (expires in 10 min)
2026-02-11 15:20:56,538 | INFO | app.api.auth | OTP email sent successfully to rhm31@mail.aub.edu
2026-02-11 15:20:56,539 | INFO | app.api.auth | OTP created for rhm31@mail.aub.edu, expires at 2026-02-11T13:30:53.385198
2026-02-11 15:21:11,499 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2026-02-11 15:21:11,501 | INFO | sqlalchemy.engine.Engine | SELECT otps.id AS otps_id, otps.email AS otps_email, otps.code AS otps_code, otps.attempts AS otps_attempts, otps.created_at AS otps_created_at, otps.expires_at AS otps_expires_at, otps.verified_at AS otps_verified_at 
FROM otps 
WHERE otps.email = ? AND otps.expires_at > ? ORDER BY otps.created_at DESC
 LIMIT ? OFFSET ?
2026-02-11 15:21:11,502 | INFO | sqlalchemy.engine.Engine | [cached since 58.87s ago] ('rhm31@mail.aub.edu', '2026-02-11 13:21:11.498065', 1, 0)
2026-02-11 15:21:11,506 | INFO | sqlalchemy.engine.Engine | SELECT users.id AS users_id, users.username AS users_username, users.entra_oid AS users_entra_oid, users.entra_email AS users_entra_email, users.role AS users_role, users.status AS users_status, users.created_at AS users_created_at, users.last_login AS users_last_login 
FROM users 
WHERE users.entra_oid = ?
 LIMIT ? OFFSET ?
2026-02-11 15:21:11,508 | INFO | sqlalchemy.engine.Engine | [cached since 58.86s ago] ('local:rhm31@mail.aub.edu', 1, 0)
2026-02-11 15:21:11,514 | INFO | sqlalchemy.engine.Engine | UPDATE users SET last_login=? WHERE users.id = ?
2026-02-11 15:21:11,515 | INFO | sqlalchemy.engine.Engine | [generated in 0.00162s] ('2026-02-11 13:21:11.510751', 1)
2026-02-11 15:21:11,521 | INFO | sqlalchemy.engine.Engine | COMMIT
2026-02-11 15:21:11,535 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2026-02-11 15:21:11,537 | INFO | sqlalchemy.engine.Engine | UPDATE otps SET verified_at=? WHERE otps.id = ?
2026-02-11 15:21:11,538 | INFO | sqlalchemy.engine.Engine | [cached since 58.85s ago] ('2026-02-11 13:21:11.534868', 2)
2026-02-11 15:21:11,543 | INFO | sqlalchemy.engine.Engine | COMMIT
2026-02-11 15:21:11,555 | INFO | app.api.auth | OTP verified and user logged in: KeenEagle6099 (rhm31@mail.aub.edu)
2026-02-11 15:21:11,567 | DEBUG | app.api.auth | Me called, user resolved
2026-02-11 15:21:11,569 | DEBUG | app.api.auth | Me called, user resolved
2026-02-11 15:21:19,572 | INFO | app.api.auth | Logout: session cookie cleared
2026-02-11 15:51:39,538 | INFO | app.main | Application startup complete
2026-02-11 15:51:39,540 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2026-02-11 15:51:39,541 | INFO | sqlalchemy.engine.Engine | PRAGMA main.table_info("otps")
2026-02-11 15:51:39,541 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2026-02-11 15:51:39,542 | INFO | sqlalchemy.engine.Engine | PRAGMA main.table_info("users")
2026-02-11 15:51:39,543 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2026-02-11 15:51:39,543 | INFO | sqlalchemy.engine.Engine | COMMIT
2026-02-11 15:51:39,543 | INFO | app.main | Database initialized successfully
2026-02-11 15:51:39,546 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2026-02-11 15:51:39,547 | INFO | sqlalchemy.engine.Engine | DELETE FROM otps WHERE otps.expires_at <= ?
2026-02-11 15:51:39,547 | INFO | sqlalchemy.engine.Engine | [generated in 0.00027s] ('2026-02-11 13:51:39.545294',)
2026-02-11 15:51:39,550 | INFO | sqlalchemy.engine.Engine | COMMIT
2026-02-11 15:51:39,558 | INFO | app.core.tasks | Cleaned up 2 expired OTP records
2026-02-11 15:51:50,190 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2026-02-11 15:51:50,192 | INFO | sqlalchemy.engine.Engine | DELETE FROM otps WHERE otps.expires_at <= ?
2026-02-11 15:51:50,192 | INFO | sqlalchemy.engine.Engine | [cached since 10.65s ago] ('2026-02-11 13:51:50.189683',)
2026-02-11 15:51:50,194 | INFO | sqlalchemy.engine.Engine | COMMIT
2026-02-11 15:51:50,195 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2026-02-11 15:51:50,200 | INFO | sqlalchemy.engine.Engine | INSERT INTO otps (email, code, attempts, created_at, expires_at, verified_at) VALUES (?, ?, ?, ?, ?, ?)
2026-02-11 15:51:50,201 | INFO | sqlalchemy.engine.Engine | [generated in 0.00145s] ('rhm31@mail.aub.edu', '933161', 0, '2026-02-11 13:51:50.200360', '2026-02-11 14:01:50.195010', None)
2026-02-11 15:51:50,206 | INFO | sqlalchemy.engine.Engine | COMMIT
2026-02-11 15:51:50,219 | INFO | app.api.auth | OTP code for rhm31@mail.aub.edu: 933161 (expires in 10 min)
2026-02-11 15:51:52,659 | INFO | app.api.auth | OTP email sent successfully to rhm31@mail.aub.edu
2026-02-11 15:51:52,660 | INFO | app.api.auth | OTP created for rhm31@mail.aub.edu, expires at 2026-02-11T14:01:50.195010
2026-02-11 15:52:04,817 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2026-02-11 15:52:04,827 | INFO | sqlalchemy.engine.Engine | SELECT otps.id AS otps_id, otps.email AS otps_email, otps.code AS otps_code, otps.attempts AS otps_attempts, otps.created_at AS otps_created_at, otps.expires_at AS otps_expires_at, otps.verified_at AS otps_verified_at 
FROM otps 
WHERE otps.email = ? AND otps.expires_at > ? ORDER BY otps.created_at DESC
 LIMIT ? OFFSET ?
2026-02-11 15:52:04,828 | INFO | sqlalchemy.engine.Engine | [generated in 0.00159s] ('rhm31@mail.aub.edu', '2026-02-11 13:52:04.816313', 1, 0)
2026-02-11 15:52:04,839 | INFO | sqlalchemy.engine.Engine | SELECT users.id AS users_id, users.username AS users_username, users.entra_oid AS users_entra_oid, users.entra_email AS users_entra_email, users.role AS users_role, users.status AS users_status, users.created_at AS users_created_at, users.last_login AS users_last_login 
FROM users 
WHERE users.entra_oid = ?
 LIMIT ? OFFSET ?
2026-02-11 15:52:04,840 | INFO | sqlalchemy.engine.Engine | [generated in 0.00157s] ('local:rhm31@mail.aub.edu', 1, 0)
2026-02-11 15:52:04,845 | INFO | sqlalchemy.engine.Engine | UPDATE users SET last_login=? WHERE users.id = ?
2026-02-11 15:52:04,846 | INFO | sqlalchemy.engine.Engine | [generated in 0.00095s] ('2026-02-11 13:52:04.842622', 1)
2026-02-11 15:52:04,850 | INFO | sqlalchemy.engine.Engine | COMMIT
2026-02-11 15:52:04,859 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2026-02-11 15:52:04,860 | INFO | sqlalchemy.engine.Engine | UPDATE otps SET verified_at=? WHERE otps.id = ?
2026-02-11 15:52:04,861 | INFO | sqlalchemy.engine.Engine | [generated in 0.00046s] ('2026-02-11 13:52:04.859358', 1)
2026-02-11 15:52:04,863 | INFO | sqlalchemy.engine.Engine | COMMIT
2026-02-11 15:52:04,871 | INFO | app.api.auth | OTP verified and user logged in: KeenEagle6099 (rhm31@mail.aub.edu)
2026-02-11 15:52:04,878 | DEBUG | app.api.auth | Me called, user resolved
2026-02-11 15:52:04,880 | DEBUG | app.api.auth | Me called, user resolved
2026-02-11 15:57:40,201 | DEBUG | app.api.auth | Me called, user resolved
2026-02-11 15:57:40,205 | DEBUG | app.api.auth | Me called, user resolved
2026-02-11 15:57:40,209 | DEBUG | app.api.auth | Me called, user resolved
2026-02-11 15:57:40,211 | DEBUG | app.api.auth | Me called, user resolved
2026-02-11 15:57:50,430 | INFO | app.api.auth | Logout: session cookie cleared
2026-02-11 16:03:06,139 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2026-02-11 16:03:06,141 | INFO | sqlalchemy.engine.Engine | DELETE FROM otps WHERE otps.expires_at <= ?
2026-02-11 16:03:06,142 | INFO | sqlalchemy.engine.Engine | [cached since 686.6s ago] ('2026-02-11 14:03:06.137631',)
2026-02-11 16:03:06,148 | INFO | sqlalchemy.engine.Engine | COMMIT
2026-02-11 16:03:06,162 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2026-02-11 16:03:06,164 | INFO | sqlalchemy.engine.Engine | INSERT INTO otps (email, code, attempts, created_at, expires_at, verified_at) VALUES (?, ?, ?, ?, ?, ?)
2026-02-11 16:03:06,165 | INFO | sqlalchemy.engine.Engine | [cached since 676s ago] ('rhm31@mail.aub.edu', '012609', 0, '2026-02-11 14:03:06.164427', '2026-02-11 14:13:06.161162', None)
2026-02-11 16:03:06,171 | INFO | sqlalchemy.engine.Engine | COMMIT
2026-02-11 16:03:06,183 | INFO | app.api.auth | OTP code for rhm31@mail.aub.edu: 012609 (expires in 10 min)
2026-02-11 16:03:08,224 | INFO | app.api.auth | OTP email sent successfully to rhm31@mail.aub.edu
2026-02-11 16:03:08,224 | INFO | app.api.auth | OTP created for rhm31@mail.aub.edu, expires at 2026-02-11T14:13:06.161162
2026-02-11 16:03:25,619 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2026-02-11 16:03:25,621 | INFO | sqlalchemy.engine.Engine | SELECT otps.id AS otps_id, otps.email AS otps_email, otps.code AS otps_code, otps.attempts AS otps_attempts, otps.created_at AS otps_created_at, otps.expires_at AS otps_expires_at, otps.verified_at AS otps_verified_at 
FROM otps 
WHERE otps.email = ? AND otps.expires_at > ? ORDER BY otps.created_at DESC
 LIMIT ? OFFSET ?
2026-02-11 16:03:25,622 | INFO | sqlalchemy.engine.Engine | [cached since 680.8s ago] ('rhm31@mail.aub.edu', '2026-02-11 14:03:25.618010', 1, 0)
2026-02-11 16:03:25,626 | INFO | sqlalchemy.engine.Engine | SELECT users.id AS users_id, users.username AS users_username, users.entra_oid AS users_entra_oid, users.entra_email AS users_entra_email, users.role AS users_role, users.status AS users_status, users.created_at AS users_created_at, users.last_login AS users_last_login 
FROM users 
WHERE users.entra_oid = ?
 LIMIT ? OFFSET ?
2026-02-11 16:03:25,627 | INFO | sqlalchemy.engine.Engine | [cached since 680.8s ago] ('local:rhm31@mail.aub.edu', 1, 0)
2026-02-11 16:03:25,631 | INFO | sqlalchemy.engine.Engine | UPDATE users SET last_login=? WHERE users.id = ?
2026-02-11 16:03:25,632 | INFO | sqlalchemy.engine.Engine | [cached since 680.8s ago] ('2026-02-11 14:03:25.630544', 1)
2026-02-11 16:03:25,639 | INFO | sqlalchemy.engine.Engine | COMMIT
2026-02-11 16:03:25,652 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2026-02-11 16:03:25,654 | INFO | sqlalchemy.engine.Engine | UPDATE otps SET verified_at=? WHERE otps.id = ?
2026-02-11 16:03:25,655 | INFO | sqlalchemy.engine.Engine | [cached since 680.8s ago] ('2026-02-11 14:03:25.651800', 1)
2026-02-11 16:03:25,660 | INFO | sqlalchemy.engine.Engine | COMMIT
2026-02-11 16:03:25,671 | INFO | app.api.auth | OTP verified and user logged in: KeenEagle6099 (rhm31@mail.aub.edu)
2026-02-11 16:05:39,409 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2026-02-11 16:05:39,410 | INFO | sqlalchemy.engine.Engine | DELETE FROM otps WHERE otps.expires_at <= ?
2026-02-11 16:05:39,411 | INFO | sqlalchemy.engine.Engine | [cached since 839.9s ago] ('2026-02-11 14:05:39.407952',)
2026-02-11 16:05:39,413 | INFO | sqlalchemy.engine.Engine | COMMIT
2026-02-11 16:05:39,415 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2026-02-11 16:05:39,416 | INFO | sqlalchemy.engine.Engine | INSERT INTO otps (email, code, attempts, created_at, expires_at, verified_at) VALUES (?, ?, ?, ?, ?, ?)
2026-02-11 16:05:39,417 | INFO | sqlalchemy.engine.Engine | [cached since 829.2s ago] ('rhm31@mail.aub.edu', '115761', 0, '2026-02-11 14:05:39.416344', '2026-02-11 14:15:39.414490', None)
2026-02-11 16:05:39,422 | INFO | sqlalchemy.engine.Engine | COMMIT
2026-02-11 16:05:39,435 | INFO | app.api.auth | OTP code for rhm31@mail.aub.edu: 115761 (expires in 10 min)
2026-02-11 16:05:40,887 | INFO | app.api.auth | OTP email sent successfully to rhm31@mail.aub.edu
2026-02-11 16:05:40,888 | INFO | app.api.auth | OTP created for rhm31@mail.aub.edu, expires at 2026-02-11T14:15:39.414490
2026-02-11 16:05:53,088 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2026-02-11 16:05:53,089 | INFO | sqlalchemy.engine.Engine | SELECT otps.id AS otps_id, otps.email AS otps_email, otps.code AS otps_code, otps.attempts AS otps_attempts, otps.created_at AS otps_created_at, otps.expires_at AS otps_expires_at, otps.verified_at AS otps_verified_at 
FROM otps 
WHERE otps.email = ? AND otps.expires_at > ? ORDER BY otps.created_at DESC
 LIMIT ? OFFSET ?
2026-02-11 16:05:53,090 | INFO | sqlalchemy.engine.Engine | [cached since 828.3s ago] ('rhm31@mail.aub.edu', '2026-02-11 14:05:53.087733', 1, 0)
2026-02-11 16:05:53,092 | INFO | sqlalchemy.engine.Engine | SELECT users.id AS users_id, users.username AS users_username, users.entra_oid AS users_entra_oid, users.entra_email AS users_entra_email, users.role AS users_role, users.status AS users_status, users.created_at AS users_created_at, users.last_login AS users_last_login 
FROM users 
WHERE users.entra_oid = ?
 LIMIT ? OFFSET ?
2026-02-11 16:05:53,093 | INFO | sqlalchemy.engine.Engine | [cached since 828.3s ago] ('local:rhm31@mail.aub.edu', 1, 0)
2026-02-11 16:05:53,095 | INFO | sqlalchemy.engine.Engine | UPDATE users SET last_login=? WHERE users.id = ?
2026-02-11 16:05:53,095 | INFO | sqlalchemy.engine.Engine | [cached since 828.3s ago] ('2026-02-11 14:05:53.094781', 1)
2026-02-11 16:05:53,099 | INFO | sqlalchemy.engine.Engine | COMMIT
2026-02-11 16:05:53,108 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2026-02-11 16:05:53,109 | INFO | sqlalchemy.engine.Engine | UPDATE otps SET verified_at=? WHERE otps.id = ?
2026-02-11 16:05:53,110 | INFO | sqlalchemy.engine.Engine | [cached since 828.2s ago] ('2026-02-11 14:05:53.108166', 2)
2026-02-11 16:05:53,112 | INFO | sqlalchemy.engine.Engine | COMMIT
2026-02-11 16:05:53,121 | INFO | app.api.auth | OTP verified and user logged in: KeenEagle6099 (rhm31@mail.aub.edu)
2026-02-11 16:09:33,088 | DEBUG | app.api.auth | Me called, user resolved
2026-02-11 16:09:34,756 | DEBUG | app.api.auth | Me called, user resolved
2026-02-11 16:10:50,213 | INFO | app.api.auth | Logout: session cookie cleared
2026-02-11 16:10:58,626 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2026-02-11 16:10:58,628 | INFO | sqlalchemy.engine.Engine | DELETE FROM otps WHERE otps.expires_at <= ?
2026-02-11 16:10:58,630 | INFO | sqlalchemy.engine.Engine | [cached since 1159s ago] ('2026-02-11 14:10:58.625284',)
2026-02-11 16:10:58,632 | INFO | sqlalchemy.engine.Engine | COMMIT
2026-02-11 16:10:58,634 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2026-02-11 16:10:58,635 | INFO | sqlalchemy.engine.Engine | INSERT INTO otps (email, code, attempts, created_at, expires_at, verified_at) VALUES (?, ?, ?, ?, ?, ?)
2026-02-11 16:10:58,636 | INFO | sqlalchemy.engine.Engine | [cached since 1148s ago] ('rhm31@mail.aub.edu', '607402', 0, '2026-02-11 14:10:58.635389', '2026-02-11 14:20:58.633261', None)
2026-02-11 16:10:58,642 | INFO | sqlalchemy.engine.Engine | COMMIT
2026-02-11 16:10:58,652 | INFO | app.api.auth | OTP code for rhm31@mail.aub.edu: 607402 (expires in 10 min)
2026-02-11 16:11:00,060 | INFO | app.api.auth | OTP email sent successfully to rhm31@mail.aub.edu
2026-02-11 16:11:00,061 | INFO | app.api.auth | OTP created for rhm31@mail.aub.edu, expires at 2026-02-11T14:20:58.633261
2026-02-11 16:11:31,242 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2026-02-11 16:11:31,245 | INFO | sqlalchemy.engine.Engine | SELECT otps.id AS otps_id, otps.email AS otps_email, otps.code AS otps_code, otps.attempts AS otps_attempts, otps.created_at AS otps_created_at, otps.expires_at AS otps_expires_at, otps.verified_at AS otps_verified_at 
FROM otps 
WHERE otps.email = ? AND otps.expires_at > ? ORDER BY otps.created_at DESC
 LIMIT ? OFFSET ?
2026-02-11 16:11:31,246 | INFO | sqlalchemy.engine.Engine | [cached since 1166s ago] ('rhm31@mail.aub.edu', '2026-02-11 14:11:31.241827', 1, 0)
2026-02-11 16:11:31,249 | INFO | sqlalchemy.engine.Engine | SELECT users.id AS users_id, users.username AS users_username, users.entra_oid AS users_entra_oid, users.entra_email AS users_entra_email, users.role AS users_role, users.status AS users_status, users.created_at AS users_created_at, users.last_login AS users_last_login 
FROM users 
WHERE users.entra_oid = ?
 LIMIT ? OFFSET ?
2026-02-11 16:11:31,250 | INFO | sqlalchemy.engine.Engine | [cached since 1166s ago] ('local:rhm31@mail.aub.edu', 1, 0)
2026-02-11 16:11:31,253 | INFO | sqlalchemy.engine.Engine | UPDATE users SET last_login=? WHERE users.id = ?
2026-02-11 16:11:31,254 | INFO | sqlalchemy.engine.Engine | [cached since 1166s ago] ('2026-02-11 14:11:31.252848', 1)
2026-02-11 16:11:31,260 | INFO | sqlalchemy.engine.Engine | COMMIT
2026-02-11 16:11:31,273 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2026-02-11 16:11:31,275 | INFO | sqlalchemy.engine.Engine | UPDATE otps SET verified_at=? WHERE otps.id = ?
2026-02-11 16:11:31,276 | INFO | sqlalchemy.engine.Engine | [cached since 1166s ago] ('2026-02-11 14:11:31.272748', 3)
2026-02-11 16:11:31,280 | INFO | sqlalchemy.engine.Engine | COMMIT
2026-02-11 16:11:31,292 | INFO | app.api.auth | OTP verified and user logged in: KeenEagle6099 (rhm31@mail.aub.edu)
2026-02-11 16:11:31,301 | DEBUG | app.api.auth | Me called, user resolved
2026-02-11 17:12:25,031 | INFO | app.main | Application startup complete
2026-02-11 17:12:25,039 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2026-02-11 17:12:25,040 | INFO | sqlalchemy.engine.Engine | PRAGMA main.table_info("otps")
2026-02-11 17:12:25,040 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2026-02-11 17:12:25,043 | INFO | sqlalchemy.engine.Engine | PRAGMA main.table_info("users")
2026-02-11 17:12:25,046 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2026-02-11 17:12:25,047 | INFO | sqlalchemy.engine.Engine | COMMIT
2026-02-11 17:12:25,048 | INFO | app.main | Database initialized successfully
2026-02-11 17:12:25,055 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2026-02-11 17:12:25,058 | INFO | sqlalchemy.engine.Engine | DELETE FROM otps WHERE otps.expires_at <= ?
2026-02-11 17:12:25,059 | INFO | sqlalchemy.engine.Engine | [generated in 0.00098s] ('2026-02-11 15:12:25.053362',)
2026-02-11 17:12:25,084 | INFO | sqlalchemy.engine.Engine | COMMIT
2026-02-11 17:12:25,096 | INFO | app.core.tasks | Cleaned up 3 expired OTP records
2026-02-11 17:12:55,323 | DEBUG | app.api.auth | Me called, user resolved
2026-02-11 17:12:55,332 | DEBUG | app.api.auth | Me called, user resolved
2026-02-11 17:12:57,693 | INFO | app.api.auth | Logout: session cookie cleared
2026-02-11 17:13:07,598 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2026-02-11 17:13:07,600 | INFO | sqlalchemy.engine.Engine | DELETE FROM otps WHERE otps.expires_at <= ?
2026-02-11 17:13:07,602 | INFO | sqlalchemy.engine.Engine | [cached since 42.54s ago] ('2026-02-11 15:13:07.597282',)
2026-02-11 17:13:07,604 | INFO | sqlalchemy.engine.Engine | COMMIT
2026-02-11 17:13:07,606 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2026-02-11 17:13:07,613 | INFO | sqlalchemy.engine.Engine | INSERT INTO otps (email, code, attempts, created_at, expires_at, verified_at) VALUES (?, ?, ?, ?, ?, ?)
2026-02-11 17:13:07,614 | INFO | sqlalchemy.engine.Engine | [generated in 0.00165s] ('rhm31@mail.aub.edu', '678541', 0, '2026-02-11 15:13:07.613026', '2026-02-11 15:23:07.605738', None)
2026-02-11 17:13:07,639 | INFO | sqlalchemy.engine.Engine | COMMIT
2026-02-11 17:13:07,651 | INFO | app.api.auth | OTP code for rhm31@mail.aub.edu: 678541 (expires in 10 min)
2026-02-11 17:13:08,895 | INFO | app.api.auth | OTP email sent successfully to rhm31@mail.aub.edu
2026-02-11 17:13:08,896 | INFO | app.api.auth | OTP created for rhm31@mail.aub.edu, expires at 2026-02-11T15:23:07.605738
2026-02-11 17:13:32,912 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2026-02-11 17:13:32,921 | INFO | sqlalchemy.engine.Engine | SELECT otps.id AS otps_id, otps.email AS otps_email, otps.code AS otps_code, otps.attempts AS otps_attempts, otps.created_at AS otps_created_at, otps.expires_at AS otps_expires_at, otps.verified_at AS otps_verified_at 
FROM otps 
WHERE otps.email = ? AND otps.expires_at > ? ORDER BY otps.created_at DESC
 LIMIT ? OFFSET ?
2026-02-11 17:13:32,923 | INFO | sqlalchemy.engine.Engine | [generated in 0.00150s] ('rhm31@mail.aub.edu', '2026-02-11 15:13:32.911547', 1, 0)
2026-02-11 17:13:32,932 | INFO | sqlalchemy.engine.Engine | SELECT users.id AS users_id, users.username AS users_username, users.entra_oid AS users_entra_oid, users.entra_email AS users_entra_email, users.role AS users_role, users.status AS users_status, users.created_at AS users_created_at, users.last_login AS users_last_login 
FROM users 
WHERE users.entra_oid = ?
 LIMIT ? OFFSET ?
2026-02-11 17:13:32,933 | INFO | sqlalchemy.engine.Engine | [generated in 0.00161s] ('local:rhm31@mail.aub.edu', 1, 0)
2026-02-11 17:13:32,942 | INFO | sqlalchemy.engine.Engine | UPDATE users SET last_login=? WHERE users.id = ?
2026-02-11 17:13:32,943 | INFO | sqlalchemy.engine.Engine | [generated in 0.00140s] ('2026-02-11 15:13:32.937391', 1)
2026-02-11 17:13:32,950 | INFO | sqlalchemy.engine.Engine | COMMIT
2026-02-11 17:13:32,962 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2026-02-11 17:13:32,970 | INFO | sqlalchemy.engine.Engine | UPDATE otps SET verified_at=? WHERE otps.id = ?
2026-02-11 17:13:32,971 | INFO | sqlalchemy.engine.Engine | [generated in 0.00155s] ('2026-02-11 15:13:32.961939', 1)
2026-02-11 17:13:32,975 | INFO | sqlalchemy.engine.Engine | COMMIT
2026-02-11 17:13:32,987 | INFO | app.api.auth | OTP verified and user logged in: KeenEagle6099 (rhm31@mail.aub.edu)
2026-02-11 17:13:32,999 | DEBUG | app.api.auth | Me called, user resolved
